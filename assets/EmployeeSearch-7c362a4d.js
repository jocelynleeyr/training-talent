import{_ as w,o as n,c as l,b as e,n as g,q as y,F as _,f as v,t as f,i as h,s as L,m as k,v as T,l as x,u as M,a as u,e as p,j as S,x as I,y as V,z as O,w as C,T as F,g as $,h as P}from"./index-f2802f18.js";import{T as K,E as B,a as z,b as H}from"./Tags-f26f710f.js";import{P as R}from"./PageHeader-7a8e5f58.js";import{M as U}from"./Modal-a97fd4dd.js";const J={props:{pages:{type:Object,default:()=>{}},getList:{type:Function,default:()=>{}},category:{type:String,default:""}},emits:["change-page"]},q={key:0,class:"flex items-center justify-center py-8 space-x-4"},A={class:""},G={class:"flex items-center justify-center space-x-2"},W=e("span",{class:"material-icons-round"}," keyboard_double_arrow_left ",-1),Q=[W],X=e("span",{class:"material-icons-round"}," chevron_left ",-1),Y=[X],Z={key:0,class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-netural-netural-400 group-[.active]:bg-primary-primary-100 group-[.active]:text-netural-netural-100 font-semibold"},ee=["onClick"],te=e("span",{class:"material-icons-round"}," navigate_next ",-1),ae=[te],se=e("span",{class:"material-icons-round"}," keyboard_double_arrow_right ",-1),ne=[se];function oe(a,t,s,D,r,d){return s.pages.total_pages>1?(n(),l("div",q,[e("nav",A,[e("ul",G,[e("li",{class:g(["group",{disabled:s.pages.current_page<=1}])},[e("a",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 group-[.disabled]:opacity-60 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold",href:"#",onClick:t[0]||(t[0]=y(c=>a.$emit("change-page",1),["prevent"]))},Q)],2),e("li",{class:g(["group",{disabled:s.pages.current_page<=1}])},[e("a",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 group-[.disabled]:opacity-60 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold",href:"#",onClick:t[1]||(t[1]=y(c=>a.$emit("change-page",s.pages.current_page-1),["prevent"]))},Y)],2),(n(!0),l(_,null,v(s.pages.total_pages,(c,m)=>(n(),l("li",{class:g(["group",{active:s.pages.current_page===c}]),key:m},[s.pages.current_page===c?(n(),l("span",Z,f(m+1),1)):(n(),l("a",{key:1,class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 font-semibold",href:"#",onClick:y(b=>a.$emit("change-page",c),["prevent"])},f(m+1),9,ee))],2))),128)),e("li",{class:g(["group",{disabled:s.pages.current_page>=s.pages.total_pages}])},[e("a",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 group-[.disabled]:opacity-30 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold",href:"#",onClick:t[2]||(t[2]=y(c=>a.$emit("change-page",s.pages.current_page+1),["prevent"]))},ae)],2),e("li",{class:g(["group",{disabled:s.pages.current_page>=s.pages.total_pages}])},[e("a",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 group-[.disabled]:opacity-30 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold",href:"#",onClick:t[3]||(t[3]=y(c=>a.$emit("change-page",s.pages.total_pages),["prevent"]))},ne)],2)])])])):h("",!0)}const le=w(J,[["render",oe]]),re={},ie={class:"flex justify-center p-4"},ce=e("div",{class:"relative w-12 h-12 animate-animation-rotate rounded-full before:content-[''] before:absolute before:inset-0 before:rounded-full before:animate-animation-prixClipFix before:border-[5px] before:border-solid before:border-primary-primary-100"},null,-1),de=[ce];function ue(a,t){return n(),l("div",ie,de)}const pe=w(re,[["render",ue]]);const me={props:{employeeData:{type:Object,default:()=>{}},pages:{type:Object,default:()=>{}},currentIndex:{type:Number,default:0}},data(){return{}},components:{ToggleCollectIcon:K,EmployeeFaceIcon:B,Tags:z},methods:{checkContentEmpty:L},computed:{...k(x,["headers"]),...k(M,["collectIds"]),...T(x,["pagination"])}},ge={class:"relative flex flex-col items-center w-[calc(100%-theme(space.12)*2-theme(space.10))] max-w-[calc(1200px+(theme(space.12)*2)+theme(space.10))] max-h-[80%] m-auto"},fe=e("span",{class:"material-icons-round text-4xl"}," chevron_left ",-1),he=[fe],_e={class:"relative overflow-hidden flex flex-col flex-1 w-full m-auto rounded-xl bg-netural-netural-100"},ye={class:"relative flex items-center justify-end pt-4 pr-4 flex-none bg-netural-netural-100"},xe=e("div",{class:"w-10 h-10"},[e("div",{class:"material-icons-round text-[40px] text-netural-netural-400"}," close ")],-1),be=[xe],ve={class:"overflow-y-auto flex flex-col px-6"},we={class:"overflow-y-auto flex flex-col justify-center items-center"},ke={class:"relative flex flex-col flex-shrink-0 w-full items-center pb-4 border-b border-neutral-400"},De={class:"flex flex-1 items-end -mr-10"},Ie={class:"overflow-y-auto flex flex-col flex-1 w-full"},Ce={class:"grid md:grid-cols-3 w-full pb-4"},$e={key:0,class:"overflow-hidden flex flex-col flex-shrink-0 space-y-2 pl-4 pt-3 pb-3 md:[&:nth-child(6n+4)]:bg-netural-netural-200 md:[&:nth-child(6n+5)]:bg-netural-netural-200 md:[&:nth-child(6n+6)]:bg-netural-netural-200"},Pe={class:"text-base text-primary-primary-100 font-bold"},Te={key:1,class:"overflow-hidden flex flex-col flex-shrink-0 space-y-2 pl-4 pt-3 pb-3 md:[&:nth-child(6n+4)]:bg-netural-netural-200 md:[&:nth-child(6n+5)]:bg-netural-netural-200 md:[&:nth-child(6n+6)]:bg-netural-netural-200"},je={class:"text-base text-primary-primary-100 font-bold"},Ee={class:"flex-grow-0 flex-shrink text-lg break-words leading-6 text-netural-netural-400"},Ne=e("span",{class:"material-icons-round text-4xl"}," navigate_next ",-1),Le=[Ne];function Me(a,t,s,D,r,d){const c=u("EmployeeFaceIcon"),m=u("ToggleCollectIcon"),b=u("Tags");return n(),l("div",ge,[e("div",{onClick:t[0]||(t[0]=i=>a.$emit("prevItem")),class:g(["absolute -left-16 inset-y-0 z-10 my-auto flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 cursor-pointer select-none group-[.disabled]:opacity-30 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold group",{disabled:s.currentIndex<=1}])},he,2),e("div",_e,[e("div",ye,[e("div",{class:"w-10 h-10 flex justify-center items-center p-4 cursor-pointer",onClick:t[1]||(t[1]=i=>a.$emit("close"))},be)]),e("div",ve,[e("div",we,[e("div",ke,[e("div",De,[p(c),p(m,{"employee-data":s.employeeData},null,8,["employee-data"])])]),e("div",Ie,[e("ul",Ce,[(n(!0),l(_,null,v(a.headers,i=>(n(),l(_,{key:i},[i==="標籤"&&d.checkContentEmpty(s.employeeData[i])!=="-"?(n(),l("li",$e,[e("h4",Pe,f(i),1),p(b,{tags:d.checkContentEmpty(s.employeeData[i])},null,8,["tags"])])):i!=="collected"?(n(),l("li",Te,[e("h4",je,f(i),1),e("p",Ee,f(d.checkContentEmpty(s.employeeData[i])),1)])):h("",!0)],64))),128))])])])])]),e("div",{onClick:t[2]||(t[2]=i=>a.$emit("nextItem")),class:g(["absolute -right-16 inset-y-0 my-auto flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 cursor-pointer select-none :hidden font-semibold",{disabled:s.currentIndex>=s.pages.totalResult}])},Le,2)])}const Se=w(me,[["render",Me]]);const Ve={components:{EmployeeItem:H,PageHeader:R,PaginationComponent:le,Loading:pe,Modal:U,EmployeeDetail:Se},data(){return{isLoading:!1,employeeModal:{show:!1},tempDetail:{},currentPageNum:1,currentIndex:0,countIndex:1,currentItemIndex:1,minValue:0,maxValue:0,selectTag:"all"}},methods:{...S(x,["changePage"]),searchBtn(){this.isLoading=!0;const a=this.searchKeyword.toLowerCase();this.modifyData=this.originData.filter(t=>!(this.selectTag!=="all"&&(!t.標籤||!t.標籤.includes(this.selectTag))||a!==""&&!(this.filterKey(t.學校,a)||this.filterKey(t.科系,a)||this.filterKey(t.專業技能,a)))),setTimeout(()=>{this.isLoading=!1},700)},filterKey(a,t){if(a)return a.toLowerCase().includes(t.toLowerCase())},showDetails(a,t){this.countIndex=this.modifyData.indexOf(t)+1,this.currentPageNum=this.paginationData.current_page,this.employeeModal.show=!0,this.tempDetail=Object.assign({},t)},navigate(a){this.countIndex+=a,this.countIndex<=1&&(this.countIndex=1),this.countIndex>=this.paginationData.totalResult&&(this.countIndex=this.paginationData.totalResult);const t=this.currentPageNum*this.paginationData.per_page-this.paginationData.per_page+1,s=this.currentPageNum*this.paginationData.per_page;this.countIndex>s&&this.currentPageNum<this.paginationData.total_pages?this.currentPageNum++:this.countIndex<t&&this.currentPageNum>1&&this.currentPageNum--,this.changePage(this.currentPageNum),this.tempDetail=JSON.parse(JSON.stringify(this.modifyData[this.countIndex-1]))}},computed:{...T(x,["paginationData","searchKeyword","modifyData","selectFilter"]),...k(x,["employeeTags","originData"])}},Oe={class:"flex flex-col flex-1 bg-netural-netural-200"},Fe={class:"container flex flex-col flex-1"},Ke={class:"py-4 bg-netural-netural-200"},Be={class:"flex items-center space-x-4"},ze={class:"flex items-center w-full"},He={class:"input-group"},Re={class:"form-select flex-grow flex-shrink-0"},Ue=e("option",{value:"all"},"全部部門",-1),Je=["value"],qe={class:"flex items-center text-base pb-4"},Ae={class:"flex items-end whitespace-nowrap space-x-3"},Ge={class:"block px-2 font-bold text-xl text-primary-primary-100"},We={class:"flex flex-col flex-1"},Qe={key:0,class:"flex flex-wrap gap-6 py-10"},Xe={key:1,class:"text-center text-lg font-bold"},Ye={class:"mt-auto"};function Ze(a,t,s,D,r,d){const c=u("PageHeader"),m=u("EmployeeItem"),b=u("Loading"),i=u("PaginationComponent"),j=u("EmployeeDetail"),E=u("Modal");return n(),l("div",Oe,[e("div",Fe,[p(c,{"page-title":"Employee Search","sub-title":"視圖搜尋"}),e("div",Ke,[e("div",Be,[e("div",ze,[e("div",He,[I(e("input",{type:"text",class:"form-input",placeholder:"搜尋 學校/科系/專業技能","onUpdate:modelValue":t[0]||(t[0]=o=>a.searchKeyword=o)},null,512),[[V,a.searchKeyword,void 0,{trim:!0}]])])]),e("div",Re,[I(e("select",{name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=o=>r.selectTag=o)},[Ue,(n(!0),l(_,null,v(a.employeeTags,o=>(n(),l("option",{value:o,key:o},f(o),9,Je))),128))],512),[[O,r.selectTag]])]),e("button",{type:"button",class:"btn-base",onClick:t[2]||(t[2]=(...o)=>d.searchBtn&&d.searchBtn(...o))}," 搜尋 ")])]),p(F,{name:"fade"},{default:C(()=>[r.isLoading?h("",!0):(n(),l(_,{key:0},[e("div",qe,[e("div",Ae,[P(" 共 "),e("span",Ge,f(a.modifyData.length),1),P(" 筆資料 ")])]),e("div",We,[r.isLoading?h("",!0):(n(),l("div",Qe,[(n(!0),l(_,null,v(a.paginationData.data,(o,N)=>(n(),$(m,{key:o.id,"employee-data":o,onOpen:et=>d.showDetails(N,o)},null,8,["employee-data","onOpen"]))),128))])),!a.modifyData.length&&!r.isLoading?(n(),l("p",Xe," 沒有符合的資料，請使用其他條件重新搜尋 ")):h("",!0)])],64))]),_:1}),r.isLoading?(n(),$(b,{key:0})):h("",!0),e("div",Ye,[p(i,{pages:a.paginationData,onChangePage:a.changePage},null,8,["pages","onChangePage"])])]),p(E,{modelValue:r.employeeModal.show,"onUpdate:modelValue":t[6]||(t[6]=o=>r.employeeModal.show=o)},{default:C(()=>[p(j,{onClose:t[3]||(t[3]=o=>r.employeeModal.show=!1),"employee-data":r.tempDetail,pages:a.paginationData,"current-index":r.countIndex,onPrevItem:t[4]||(t[4]=o=>d.navigate(-1)),onNextItem:t[5]||(t[5]=o=>d.navigate(1))},null,8,["employee-data","pages","current-index"])]),_:1},8,["modelValue"])])}const ot=w(Ve,[["render",Ze]]);export{ot as default};
