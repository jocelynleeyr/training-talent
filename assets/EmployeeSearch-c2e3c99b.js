import{_ as w,o as s,c as o,b as e,n as _,q as y,F as h,f as v,t as g,i as f,s as L,m as k,l as b,u as P,a as u,e as p,j as M,v as V,x as D,y as S,z as F,w as I,T as K,g as C,h as T}from"./index-27d8646d.js";import{T as B,E as N,a as O,b as H}from"./Tags-b1046b80.js";import{P as U}from"./PageHeader-ce1cbb75.js";import{M as z}from"./Modal-776eddde.js";const q={props:{pages:{type:Object,default:()=>{}},getList:{type:Function,default:()=>{}},category:{type:String,default:""}},emits:["change-page"]},A={key:0,class:"flex items-center justify-center py-8 space-x-4"},G={class:""},W={class:"flex items-center justify-center space-x-2"},J=e("span",{class:"material-icons-round"}," keyboard_double_arrow_left ",-1),Q=[J],R=e("span",{class:"material-icons-round"}," chevron_left ",-1),X=[R],Y={key:0,class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-netural-netural-400 group-[.active]:bg-primary-primary-100 group-[.active]:text-netural-netural-100 font-semibold"},Z=["onClick"],ee=e("span",{class:"material-icons-round"}," navigate_next ",-1),te=[ee],ae=e("span",{class:"material-icons-round"}," keyboard_double_arrow_right ",-1),se=[ae];function ne(a,t,n,$,d,c){return n.pages.total_pages>1?(s(),o("div",A,[e("nav",G,[e("ul",W,[e("li",{class:_(["group",{disabled:n.pages.current_page<=1}])},[e("a",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 group-[.disabled]:opacity-60 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold",href:"#",onClick:t[0]||(t[0]=y(i=>a.$emit("change-page",1),["prevent"]))},Q)],2),e("li",{class:_(["group",{disabled:n.pages.current_page<=1}])},[e("a",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 group-[.disabled]:opacity-60 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold",href:"#",onClick:t[1]||(t[1]=y(i=>a.$emit("change-page",n.pages.current_page-1),["prevent"]))},X)],2),(s(!0),o(h,null,v(n.pages.total_pages,(i,m)=>(s(),o("li",{class:_(["group",{active:n.pages.current_page===i}]),key:m},[n.pages.current_page===i?(s(),o("span",Y,g(m+1),1)):(s(),o("a",{key:1,class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 font-semibold",href:"#",onClick:y(x=>a.$emit("change-page",i),["prevent"])},g(m+1),9,Z))],2))),128)),e("li",{class:_(["group",{disabled:n.pages.current_page>=n.pages.total_pages}])},[e("a",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 group-[.disabled]:opacity-30 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold",href:"#",onClick:t[2]||(t[2]=y(i=>a.$emit("change-page",n.pages.current_page+1),["prevent"]))},te)],2),e("li",{class:_(["group",{disabled:n.pages.current_page>=n.pages.total_pages}])},[e("a",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 group-[.disabled]:opacity-30 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold",href:"#",onClick:t[3]||(t[3]=y(i=>a.$emit("change-page",n.pages.total_pages),["prevent"]))},se)],2)])])])):f("",!0)}const oe=w(q,[["render",ne]]),le={},re={class:"flex justify-center p-4"},ie=e("div",{class:"relative w-12 h-12 animate-animation-rotate rounded-full before:content-[''] before:absolute before:inset-0 before:rounded-full before:animate-animation-prixClipFix before:border-[5px] before:border-solid before:border-primary-primary-100"},null,-1),de=[ie];function ce(a,t){return s(),o("div",re,de)}const ue=w(le,[["render",ce]]),pe={props:{employeeData:{type:Object,default:()=>{}}},data(){return{currentIndex:0}},components:{ToggleCollectIcon:B,EmployeeFaceIcon:N,Tags:O},methods:{checkContentEmpty:L},computed:{...k(b,["headers"]),...k(P,["collectIds"])}},me={class:"relative flex flex-col items-center w-full max-w-[1200px] max-h-[80%] m-auto"},ge=e("span",{class:"material-icons-round text-4xl"}," chevron_left ",-1),fe=[ge],he={class:"relative overflow-hidden flex flex-col flex-1 w-full m-auto rounded-xl bg-netural-netural-100"},_e={class:"relative flex items-center justify-end pt-4 pr-4 flex-none bg-netural-netural-100"},ye=e("div",{class:"w-10 h-10"},[e("div",{class:"material-icons-round text-[40px] text-netural-netural-400"}," close ")],-1),xe=[ye],be={class:"overflow-y-auto flex flex-col px-6"},ve={class:"overflow-y-auto flex flex-col justify-center items-center"},we={class:"relative flex flex-col flex-shrink-0 w-full items-center pb-4 border-b border-neutral-400"},ke={class:"flex flex-1 items-end -mr-10"},$e={class:"overflow-y-auto flex flex-col flex-1 w-full"},De={class:"grid md:grid-cols-3 w-full pb-4"},Ie={key:0,class:"overflow-hidden flex flex-col flex-shrink-0 space-y-2 pl-4 pt-3 pb-3 md:[&:nth-child(6n+4)]:bg-netural-netural-200 md:[&:nth-child(6n+5)]:bg-netural-netural-200 md:[&:nth-child(6n+6)]:bg-netural-netural-200"},Ce={class:"text-base text-primary-primary-100 font-bold"},Te={key:1,class:"overflow-hidden flex flex-col flex-shrink-0 space-y-2 pl-4 pt-3 pb-3 md:[&:nth-child(6n+4)]:bg-netural-netural-200 md:[&:nth-child(6n+5)]:bg-netural-netural-200 md:[&:nth-child(6n+6)]:bg-netural-netural-200"},je={class:"text-base text-primary-primary-100 font-bold"},Ee={class:"flex-grow-0 flex-shrink text-lg break-words leading-6 text-netural-netural-400"},Le=e("span",{class:"material-icons-round text-4xl"}," navigate_next ",-1),Pe=[Le];function Me(a,t,n,$,d,c){const i=u("EmployeeFaceIcon"),m=u("ToggleCollectIcon"),x=u("Tags");return s(),o("div",me,[e("div",{onClick:t[0]||(t[0]=r=>a.$emit("prevItem")),class:"absolute -left-20 inset-y-0 my-auto flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 cursor-pointer select-none group-[.disabled]:opacity-30 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold"},fe),e("div",he,[e("div",_e,[e("div",{class:"w-10 h-10 flex justify-center items-center p-4 cursor-pointer",onClick:t[1]||(t[1]=r=>a.$emit("close"))},xe)]),e("div",be,[e("div",ve,[e("div",we,[e("div",ke,[p(i),p(m,{"employee-data":n.employeeData},null,8,["employee-data"])])]),e("div",$e,[e("ul",De,[(s(!0),o(h,null,v(a.headers,r=>(s(),o(h,{key:r},[r==="標籤"&&c.checkContentEmpty(n.employeeData[r])!=="-"?(s(),o("li",Ie,[e("h4",Ce,g(r),1),p(x,{tags:c.checkContentEmpty(n.employeeData[r])},null,8,["tags"])])):r!=="collected"?(s(),o("li",Te,[e("h4",je,g(r),1),e("p",Ee,g(c.checkContentEmpty(n.employeeData[r])),1)])):f("",!0)],64))),128))])])])])]),e("div",{onClick:t[2]||(t[2]=r=>a.$emit("nextItem")),class:"absolute -right-20 inset-y-0 my-auto flex items-center justify-center w-12 h-12 rounded-xl bg-netural-netural-100 text-primary-primary-100 cursor-pointer select-none group-[.disabled]:opacity-30 group-[.disabled]:text-neutral-300 group-[.disabled]:cursor-not-allowed font-semibold"},Pe)])}const Ve=w(pe,[["render",Me]]);const Se={components:{EmployeeItem:H,PageHeader:U,PaginationComponent:oe,Loading:ue,Modal:z,EmployeeDetail:Ve},data(){return{isLoading:!1,employeeModal:{show:!1},tempDetail:{},currentIndex:0}},methods:{...M(b,["changePage"]),searchBtn(){this.isLoading=!0;const a=this.searchKeyword.toLowerCase();this.modifyData=this.originData.filter(t=>!(this.selectTag!=="all"&&(!t.標籤||!t.標籤.includes(this.selectTag))||a!==""&&!(this.filterKey(t.學校,a)||this.filterKey(t.科系,a)||this.filterKey(t.專業技能,a)))),setTimeout(()=>{this.isLoading=!1},700)},filterKey(a,t){if(a)return a.toLowerCase().includes(t.toLowerCase())},openDetail(a){this.employeeModal.show=!0,this.tempDetail=Object.assign({},a),this.currentIndex=this.paginationData.data.findIndex(t=>t.id===a.id)},nextItem(){this.currentIndex+=1,this.changeDetailView()},prevItem(){this.currentIndex-=1,this.changeDetailView()},changeDetailView(){this.currentIndex>=this.paginationData.data.length-1?(this.currentIndex=this.paginationData.data.length-1,console.log("this.currentIndex",this.currentIndex)):this.currentIndex<=0&&(this.currentIndex=0),this.tempDetail=Object.assign({},this.paginationData.data[this.currentIndex])}},computed:{...V(b,["paginationData","selectTag","searchKeyword","modifyData","selectFilter"]),...k(b,["employeeTags","originData"])}},Fe={class:"flex flex-col flex-1 bg-netural-netural-200"},Ke={class:"container flex flex-col flex-1"},Be={class:"py-4 bg-netural-netural-200"},Ne={class:"flex items-center space-x-4"},Oe={class:"flex items-center w-full"},He={class:"input-group"},Ue={class:"form-select flex-grow flex-shrink-0"},ze=e("option",{value:"all"},"全部部門",-1),qe=["value"],Ae={class:"flex items-center text-base pb-4"},Ge={class:"flex items-end whitespace-nowrap space-x-3"},We={class:"block px-2 font-bold text-xl text-primary-primary-100"},Je={class:"flex flex-col flex-1"},Qe={key:0,class:"flex flex-wrap gap-6 py-10"},Re={key:1,class:"text-center text-lg font-bold"},Xe={class:"mt-auto"};function Ye(a,t,n,$,d,c){const i=u("PageHeader"),m=u("EmployeeItem"),x=u("Loading"),r=u("PaginationComponent"),j=u("EmployeeDetail"),E=u("Modal");return s(),o("div",Fe,[e("div",Ke,[p(i,{"page-title":"Employee Search","sub-title":"視圖搜尋"}),e("div",Be,[e("div",Ne,[e("div",Oe,[e("div",He,[D(e("input",{type:"text",class:"form-input",placeholder:"搜尋 學校/科系/專業技能","onUpdate:modelValue":t[0]||(t[0]=l=>a.searchKeyword=l)},null,512),[[S,a.searchKeyword,void 0,{trim:!0}]])])]),e("div",Ue,[D(e("select",{name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=l=>a.selectTag=l)},[ze,(s(!0),o(h,null,v(a.employeeTags,l=>(s(),o("option",{value:l,key:l},g(l),9,qe))),128))],512),[[F,a.selectTag]])]),e("button",{type:"button",class:"btn-base",onClick:t[2]||(t[2]=(...l)=>c.searchBtn&&c.searchBtn(...l))}," 搜尋 ")])]),p(K,{name:"fade"},{default:I(()=>[d.isLoading?f("",!0):(s(),o(h,{key:0},[e("div",Ae,[e("div",Ge,[T(" 共 "),e("span",We,g(a.modifyData.length),1),T(" 筆資料 ")])]),e("div",Je,[d.isLoading?f("",!0):(s(),o("div",Qe,[(s(!0),o(h,null,v(a.paginationData.data,(l,Ze)=>(s(),C(m,{key:l.id,"employee-data":l,onOpen:et=>c.openDetail(l)},null,8,["employee-data","onOpen"]))),128))])),!a.modifyData.length&&!d.isLoading?(s(),o("p",Re," 沒有符合的資料，請使用其他條件重新搜尋 ")):f("",!0)])],64))]),_:1}),d.isLoading?(s(),C(x,{key:0})):f("",!0),e("div",Xe,[p(r,{pages:a.paginationData,onChangePage:a.changePage},null,8,["pages","onChangePage"])])]),p(E,{modelValue:d.employeeModal.show,"onUpdate:modelValue":t[4]||(t[4]=l=>d.employeeModal.show=l)},{default:I(()=>[p(j,{onClose:t[3]||(t[3]=l=>d.employeeModal.show=!1),"employee-data":d.tempDetail,onPrevItem:c.prevItem,onNextItem:c.nextItem},null,8,["employee-data","onPrevItem","onNextItem"])]),_:1},8,["modelValue"])])}const ot=w(Se,[["render",Ye]]);export{ot as default};
